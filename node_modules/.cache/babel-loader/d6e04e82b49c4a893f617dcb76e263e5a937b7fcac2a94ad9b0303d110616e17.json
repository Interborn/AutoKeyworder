{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dsafr\\\\Documents\\\\Dev\\\\AutoKeyworder\\\\src\\\\components\\\\upload\\\\UpscaleImageInput.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport uploadIcon from '../../assets/upload-icon.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UpscaleImageInput({\n  onUploadClicked\n}) {\n  _s();\n  const dropzoneRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const fileListRef = useRef(null);\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const serverOrigin = `${window.location.protocol}//${window.location.hostname}:3001`;\n  useEffect(() => {\n    if (uploadedFiles.length > 0) {\n      onUploadClicked(uploadedFiles);\n    }\n  }, [uploadedFiles, onUploadClicked]);\n  useEffect(() => {\n    const handleDragEnter = e => e.preventDefault();\n    const handleDragOver = e => e.preventDefault();\n    const handleDragLeave = () => {};\n    const handleDrop = e => {\n      e.preventDefault();\n      handleFiles(e.dataTransfer.files);\n    };\n    const handleChange = e => {\n      handleFiles(e.target.files);\n    };\n    const dropzone = dropzoneRef.current;\n    dropzone.addEventListener('dragenter', handleDragEnter);\n    dropzone.addEventListener('dragover', handleDragOver);\n    dropzone.addEventListener('dragleave', handleDragLeave);\n    dropzone.addEventListener('drop', handleDrop);\n    fileInputRef.current.addEventListener('change', handleChange);\n    return () => {\n      dropzone.removeEventListener('dragenter', handleDragEnter);\n      dropzone.removeEventListener('dragover', handleDragOver);\n      dropzone.removeEventListener('dragleave', handleDragLeave);\n      dropzone.removeEventListener('drop', handleDrop);\n      fileInputRef.current.removeEventListener('change', handleChange);\n    };\n  }, [dropzoneRef, fileInputRef]);\n  const handleFiles = async files => {\n    const formData = new FormData();\n    for (const file of files) {\n      formData.append('files', file);\n    }\n    try {\n      const response = await fetch(`${serverOrigin}/uploads`, {\n        method: 'POST',\n        body: formData\n      });\n      if (response.ok) {\n        console.log('Files uploaded and processing started successfully');\n        // Fetch updated photoList.json or other relevant data\n        const newPhotoList = await response.json();\n        setUploadedFiles(newPhotoList);\n        onUploadClicked(newPhotoList);\n      } else {\n        console.error('There was a problem with the upload');\n      }\n    } catch (error) {\n      console.error('Error during file upload:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex lg:flex-row flex-col w-full transition-container`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `image-input h-full w-full lg:max-w-[600px] lg:max-h-[600px] pt-5 pb-7 px-10 bg-white rounded-lg shadow-lg`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: dropzoneRef,\n        className: `bg-gray-100 px-8 py-4 text-center rounded-lg border-dashed border-2 hover:border-green-600 transition duration-300 ease-in-out transform hover:shadow-lg group mb-1`,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fileInput\",\n          className: \"cursor-pointer flex flex-col items-center space-y-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"fileInput\",\n          ref: fileInputRef,\n          type: \"file\",\n          className: \"hidden\",\n          name: \"folderUpload\",\n          webkitdirectory: \"true\",\n          directory: \"true\",\n          multiple: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col w-full items-center gap-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center w-full text-slate-400 ring-slate-200 ring-2 py-1.5 h-[36px]\",\n          ref: fileListRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n}\n_s(UpscaleImageInput, \"LiWFqjIZjOEasRSBy6aBLD6txms=\");\n_c = UpscaleImageInput;\nexport default UpscaleImageInput;\nvar _c;\n$RefreshReg$(_c, \"UpscaleImageInput\");","map":{"version":3,"names":["React","useRef","useState","useEffect","uploadIcon","jsxDEV","_jsxDEV","UpscaleImageInput","onUploadClicked","_s","dropzoneRef","fileInputRef","fileListRef","uploadedFiles","setUploadedFiles","serverOrigin","window","location","protocol","hostname","length","handleDragEnter","e","preventDefault","handleDragOver","handleDragLeave","handleDrop","handleFiles","dataTransfer","files","handleChange","target","dropzone","current","addEventListener","removeEventListener","formData","FormData","file","append","response","fetch","method","body","ok","console","log","newPhotoList","json","error","className","children","ref","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","type","name","webkitdirectory","directory","multiple","_c","$RefreshReg$"],"sources":["C:/Users/dsafr/Documents/Dev/AutoKeyworder/src/components/upload/UpscaleImageInput.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport uploadIcon from '../../assets/upload-icon.png';\r\n\r\nfunction UpscaleImageInput({ onUploadClicked }) {\r\n    const dropzoneRef = useRef(null);\r\n    const fileInputRef = useRef(null);\r\n    const fileListRef = useRef(null);\r\n\r\n    const [uploadedFiles, setUploadedFiles] = useState([]);\r\n\r\n    const serverOrigin = `${window.location.protocol}//${window.location.hostname}:3001`;\r\n\r\n    useEffect(() => {\r\n        if (uploadedFiles.length > 0) {\r\n            onUploadClicked(uploadedFiles);\r\n        }\r\n    }, [uploadedFiles, onUploadClicked]);\r\n\r\n    useEffect(() => {\r\n        const handleDragEnter = (e) => e.preventDefault();\r\n        const handleDragOver = (e) => e.preventDefault();\r\n        const handleDragLeave = () => {};\r\n        const handleDrop = (e) => {\r\n            e.preventDefault();\r\n            handleFiles(e.dataTransfer.files);\r\n        };\r\n        const handleChange = (e) => {\r\n            handleFiles(e.target.files);\r\n        };\r\n\r\n        const dropzone = dropzoneRef.current;\r\n        dropzone.addEventListener('dragenter', handleDragEnter);\r\n        dropzone.addEventListener('dragover', handleDragOver);\r\n        dropzone.addEventListener('dragleave', handleDragLeave);\r\n        dropzone.addEventListener('drop', handleDrop);\r\n        fileInputRef.current.addEventListener('change', handleChange);\r\n\r\n        return () => {\r\n            dropzone.removeEventListener('dragenter', handleDragEnter);\r\n            dropzone.removeEventListener('dragover', handleDragOver);\r\n            dropzone.removeEventListener('dragleave', handleDragLeave);\r\n            dropzone.removeEventListener('drop', handleDrop);\r\n            fileInputRef.current.removeEventListener('change', handleChange);\r\n        };\r\n    }, [dropzoneRef, fileInputRef]);\r\n\r\n    const handleFiles = async (files) => {\r\n        const formData = new FormData();\r\n        for (const file of files) {\r\n            formData.append('files', file);\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${serverOrigin}/uploads`, {\r\n                method: 'POST',\r\n                body: formData,\r\n            });\r\n\r\n            if (response.ok) {\r\n                console.log('Files uploaded and processing started successfully');\r\n                // Fetch updated photoList.json or other relevant data\r\n                const newPhotoList = await response.json();\r\n                setUploadedFiles(newPhotoList);\r\n                onUploadClicked(newPhotoList);\r\n            } else {\r\n                console.error('There was a problem with the upload');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error during file upload:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`flex lg:flex-row flex-col w-full transition-container`}>\r\n            <div className={`image-input h-full w-full lg:max-w-[600px] lg:max-h-[600px] pt-5 pb-7 px-10 bg-white rounded-lg shadow-lg`}>\r\n                <div\r\n                    ref={dropzoneRef}\r\n                    className={`bg-gray-100 px-8 py-4 text-center rounded-lg border-dashed border-2 hover:border-green-600 transition duration-300 ease-in-out transform hover:shadow-lg group mb-1`}\r\n                >\r\n                    <label htmlFor=\"fileInput\" className=\"cursor-pointer flex flex-col items-center space-y-2\">\r\n                        {/* Drag and Drop Area Content */}\r\n                    </label>\r\n                    <input id=\"fileInput\" ref={fileInputRef} type=\"file\" className=\"hidden\" name=\"folderUpload\" webkitdirectory=\"true\" directory=\"true\" multiple />\r\n                </div>\r\n                \r\n                <div className=\"flex flex-col w-full items-center gap-3\">\r\n                    <div className=\"text-center w-full text-slate-400 ring-slate-200 ring-2 py-1.5 h-[36px]\" ref={fileListRef}></div>                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default UpscaleImageInput;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}